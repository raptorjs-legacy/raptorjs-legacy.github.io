define("raptor/renderer/RenderResult",function(e){"use strict";var t=e("raptor/dom"),n=function(e,t){this.html=e,this.context=t,this._node=undefined};return n.prototype={getWidget:function(){if(!this.widgetDefs)throw new Error("Cannot call getWidget() until after HTML fragment is added to DOM.");return this.widgetDefs.length?this.widgetDefs[0].widget:undefined},getWidgets:function(e){if(!this.widgetDefs)throw new Error("Cannot call getWidgets() until after HTML fragment is added to DOM.");var t,n;if(e){t=[];for(n=0;n<this.widgetDefs.length;n++){var r=this.widgetDefs[n].widget;e(r)&&t.push(r)}}else{t=new Array(this.widgetDefs.length);for(n=0;n<this.widgetDefs.length;n++)t[n]=this.widgetDefs[n].widget}return t},_afterInsert:function(){var t=e.find("raptor/widgets");if(t){var n=t.getWidgetsContext(this.context);this.widgetDefs=n.widgets}var r=e.find("raptor/pubsub");return r&&r.publish("raptor/renderer/renderedToDOM",{node:this.getNode(),context:this.context}),this},appendTo:function(e){return t.appendTo(this.getNode(),e),this._afterInsert()},replace:function(e){return t.replace(this.getNode(),e),this._afterInsert()},replaceChildrenOf:function(e){return t.replaceChildrenOf(this.getNode(),e),this._afterInsert()},insertBefore:function(e){return t.insertBefore(this.getNode(),e),this._afterInsert()},insertAfter:function(e){return t.insertAfter(this.getNode(),e),this._afterInsert()},prependTo:function(e){return t.prependTo(this.getNode(),e),this._afterInsert()},getNode:function(){var e=this._node,t,n;if(e===undefined){if(this.html){n=document.createElement("body"),n.innerHTML=this.html;if(n.childNodes.length==1)e=n.childNodes[0];else{e=document.createDocumentFragment();while(t=n.firstChild)e.appendChild(t)}}else e=document.createDocumentFragment();this._node=e}return e}},n});