define("raptor/widgets/Widget",["raptor"],function(e,t){"use strict";var n=t("raptor/listeners"),r=t("raptor/dom"),i=function(e,s,o){var u={widget:e},a=e.getEl(),f=t("raptor/widgets"),l=e._assignedId;e.publish("beforeDestroy",u),e.__destroyed=!0;if(a){if(o){var c=function(e){r.forEachChildEl(e,function(e){if(e.id){var t=f.get(e.id);t&&i(t,!1,!1)}c(e)})};c(a)}s&&a.parentNode&&a.parentNode.removeChild(a)}f._remove(e._id);if(l){var h=f.get(e._scope);h&&h.widgets._remove(e,l)}e.publish("destroy",u),n.unsubscribeFromAll(e)},s,o=function(){};return o.makeWidget=function(e,t){if(!e._isWidget)for(var n in s)t.hasOwnProperty(n)||(t[n]=s[n])},o.prototype=s={_isWidget:!0,getObservable:function(){return this._observable||(this._observable=n.createObservable())},registerMessages:function(e,t){this.getObservable().registerMessages.apply(this,arguments)},publish:function(n,r){var i=this.getObservable();i.publish.apply(i,arguments);var s;this._events&&(s=this._events[n])&&(s.props&&(r=e.extend(r||{},s.props)),t("raptor/pubsub").publish(s.target,r))},subscribe:function(e,t,n){var r=this.getObservable();return r.subscribe.apply(r,arguments)},getElId:function(e){return e?this._id+"-"+e:this._id},getEl:function(e){return arguments.length===1?document.getElementById(this.getElId(e)):this.el||document.getElementById(this.getElId())},getWidget:function(e){return this.widgets.getWidget(e)},getWidgets:function(e){return this.widgets.getWidgets(e)},destroy:function(e){e=e||{},i(this,e.removeNode!==!1,e.recursive!==!1)},isDestroyed:function(){return this.__destroyed},_getRootEl:function(){var t=this.getEl();if(!t)throw e.createError(new Error("Root element missing for widget of type "+this.constructor.getName()));return t},rerender:function(n,r){var i=this.renderer,s=this.constructor.getName(),o=t("raptor/renderer"),u=this._getRootEl();i||(this.constructor.render?i=this.constructor:s.endsWith("Widget")&&(i=t.find(s.slice(0,-6)+"Renderer")));if(!i)throw e.createError(new Error("Renderer not found for widget "+s));return o.render(i,n,r).replace(u)},detach:function(){r.detach(this._getRootEl())},appendTo:function(e){r.appendTo(this._getRootEl(),e)},replace:function(e){r.replace(this._getRootEl(),e)},replaceChildrenOf:function(e){r.replaceChildrenOf(this._getRootEl(),e)},insertBefore:function(e){r.insertBefore(this._getRootEl(),e)},insertAfter:function(e){r.insertAfter(this._getRootEl(),e)},prependTo:function(e){r.prependTo(this._getRootEl(),e)}},s.on=s.subscribe,s.elId=s.getElId,o});