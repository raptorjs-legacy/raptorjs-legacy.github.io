define("raptor/widgets/WidgetsContext",["raptor"],function(e,t,n,r){"use strict";var i=t("raptor/widgets/WidgetDef"),s=function(e){this.context=e,this.widgets=[],this.widgetStack=[]};return s.prototype={getWidgets:function(){return this.widgets},beginWidget:function(t,n){var r=this,s=r.widgetStack,o=s.length,u=o?s[o-1]:null;t.id||(t.id=r._nextWidgetId());if(t.assignedId&&!t.scope)throw e.createError(new Error('Widget with an assigned ID "'+t.assignedId+'" is not scoped within another widget.'));t.parent=u;var a=new i(t);u?u.addChild(a):r.widgets.push(a),s.push(a);try{n(a)}finally{s.splice(o,1)}},hasWidgets:function(){return this.widgets.length!==0},clearWidgets:function(){this.widgets=[],this.widgetStack=[]},_nextWidgetId:function(){return"w"+this.context.uniqueId()}},s});