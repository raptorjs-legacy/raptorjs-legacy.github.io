define("raptor/templating",["raptor"],function(e,t,n,r){"use strict";var i=function(e){return $rget("rhtml",e)},s={},o=Array.isArray,u=e.createError,a=t("raptor/strings/StringBuilder"),f=t("raptor/xml/utils").escapeXml,l=t("raptor/xml/utils").escapeXmlAttr,c=t("raptor/render-context"),h=c.Context,p=h.classFunc,d,v=function(e){var n=t(e),r;return n.process||n.render?r=n:(r=n.instance)||(r=n.instance=new n),r},m=function(e){return Array.isArray(e)===!0?e.length!==0:e},g={h:p,t:v,fv:function(e,t){if(!e)return;e.forEach||(e=[e]);var n=0,r=e.length,i={getLength:function(){return r},isLast:function(){return n===r-1},isFirst:function(){return n===0},getIndex:function(){return n}};for(;n<r;n++){var s=e[n];t(s||"",i)}},f:e.forEach,fl:function(e,t){e!=null&&(o(e)||(e=[e]),t(e,0,e.length))},fp:function(e,t){if(!e)return;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},e:function(e){return!m(e)},ne:m,x:f,xa:l,nx:function(e){return{toString:function(){return e}}}};return d={templateFunc:function(e){var t=s[e];if(!t){t=i(e),!t&&this.findTemplate&&(this.findTemplate(e),t=i(e));if(t){var n=this.getTemplateInfo(e);t=t(g,n)}if(!t)throw u(new Error('Template not found with name "'+e+'"'));s[e]=t}return t},getTemplateInfo:function(e){return{name:e}},render:function(e,t,n){if(!n)throw u(new Error("Context is required"));var r=this.templateFunc(e);try{r(t||{},n)}catch(i){throw u(new Error('Unable to render template with name "'+e+'". Exception: '+i),i)}},renderToString:function(e,t,n){var r=new a;if(n===undefined)this.render(e,t,new h(r));else{var i=this;n.swapWriter(r,function(){i.render(e,t,n)})}return r.toString()},unload:function(e){delete s[e],$rset("rhtml",e,undefined)},getFunction:p,createContext:c.createContext,getHandler:v,helpers:g},d});